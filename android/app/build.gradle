plugins {
  id "com.android.application"
  id "org.jetbrains.kotlin.android"
  id "dev.flutter.flutter-gradle-plugin"
}

def keystoreProperties = new Properties()
def keystorePropertiesFile = rootProject.file("key.properties")
if (keystorePropertiesFile.exists()) {
    keystoreProperties.load(new FileInputStream(keystorePropertiesFile))
}


android {
  namespace "com.example.autocare_pro"
  compileSdk 35

  defaultConfig {
    applicationId "com.example.autocare_pro"
    minSdk 21
    targetSdk 35
    versionCode 1
    versionName "1.0"
    multiDexEnabled true
  }

 signingConfigs {
    release {
      if (keystoreProperties['storeFile']) {
        storeFile file(keystoreProperties['storeFile'])
        storePassword keystoreProperties['storePassword']
        keyAlias keystoreProperties['keyAlias']
        keyPassword keystoreProperties['keyPassword']
        enableV1Signing true
        enableV2Signing true
      }
    }
  }

  // (Optional) helps some CI envs
  packagingOptions {
    jniLibs {
      useLegacyPackaging = true
    }
  }

  compileOptions {
    sourceCompatibility JavaVersion.VERSION_17
    targetCompatibility JavaVersion.VERSION_17
    coreLibraryDesugaringEnabled true
  }
  kotlinOptions {
    jvmTarget = "17"
    // (Optional) stability with AGP 8.x on CI:
    freeCompilerArgs += ["-Xjvm-default=all"]
  }

  buildTypes {
    release {
      minifyEnabled false
      shrinkResources false
      signingConfig signingConfigs.release
    }
  }
}

dependencies {
  coreLibraryDesugaring "com.android.tools:desugar_jdk_libs:2.1.4"
  implementation "androidx.core:core-ktx:1.13.1"
  // If you still see multidex complaints on some devices, you can also add:
  implementation "androidx.multidex:multidex:2.0.1"
}